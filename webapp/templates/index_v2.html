<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EAA Scanner - Analisi Accessibilit√† Web</title>
  <link rel="stylesheet" href="/static/css/app_v2.css">
</head>
<body>
  <div id="app">
    <!-- Header principale -->
    <header class="app-header">
      <div class="container">
        <div class="header-content">
          <div class="header-main">
            <h1>üîç EAA Accessibility Scanner</h1>
            <p class="subtitle">Sistema professionale di analisi conformit√† WCAG e EAA</p>
          </div>
          <div class="header-actions">
            <button id="api-keys-btn" class="api-keys-btn status-none" title="Gestisci API Keys">
              üîë API Keys
            </button>
          </div>
        </div>
      </div>
    </header>

    <!-- Stepper del workflow -->
    <div class="workflow-stepper">
      <div class="container">
        <div class="steps">
          <div class="step active" data-step="1">
            <div class="step-number">1</div>
            <div class="step-label">Configurazione</div>
          </div>
          <div class="step" data-step="2">
            <div class="step-number">2</div>
            <div class="step-label">Discovery URL</div>
          </div>
          <div class="step" data-step="3">
            <div class="step-number">3</div>
            <div class="step-label">Selezione Pagine</div>
          </div>
          <div class="step" data-step="4">
            <div class="step-number">4</div>
            <div class="step-label">Scansione</div>
          </div>
          <div class="step" data-step="5">
            <div class="step-number">5</div>
            <div class="step-label">Report</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Container principale -->
    <main class="main-content">
      <div class="container">
        <span id="scan-phase-indicator" data-testid="scan-phase" style="display:none"></span>
        
        <!-- FASE 1: Configurazione iniziale -->
        <section id="phase-config" class="phase-section active">
          <h2>üìã Configurazione Scansione</h2>
          
          <div class="config-grid">
            <!-- Dati base -->
            <div class="config-card">
              <h3>Informazioni Base</h3>
              <div class="form-group">
                <label for="url">URL del sito da analizzare *</label>
                <input type="url" id="url" name="url" required placeholder="https://esempio.com">
                <small>Inserisci l'URL completo del sito web</small>
              </div>
              
              <div class="form-group">
                <label for="company_name">Nome Azienda/Organizzazione *</label>
                <input type="text" id="company_name" name="company_name" required placeholder="Azienda SPA">
              </div>
              
              <div class="form-group">
                <label for="email">Email per il report *</label>
                <input type="email" id="email" name="email" required placeholder="report@azienda.com">
              </div>
            </div>

            <!-- Configurazione discovery -->
            <div class="config-card">
              <h3>Opzioni Discovery</h3>
              
              <div class="form-group">
                <label for="discovery_mode">Modalit√† Discovery</label>
                <select id="discovery_mode" name="discovery_mode">
                  <option value="smart">Smart (Automatico + Manuale)</option>
                  <option value="crawler">Solo Crawler Automatico</option>
                  <option value="manual">Solo Inserimento Manuale</option>
                  <option value="sitemap">Da Sitemap</option>
                </select>
              </div>
              
              <div class="form-group">
                <label for="max_pages">Numero massimo pagine da scoprire</label>
                <input type="number" id="max_pages" name="max_pages" value="50" min="1" max="500">
                <small>Limita il numero di pagine da analizzare</small>
              </div>
              
              <div class="form-group">
                <label for="max_depth">Profondit√† massima crawling</label>
                <input type="number" id="max_depth" name="max_depth" value="3" min="1" max="10">
                <small>Livelli di navigazione da esplorare</small>
              </div>
            </div>

            <!-- Placeholder per configurazione LLM spostata -->
            <!-- La configurazione LLM √® ora nella fase 4 dopo la scansione -->

            <!-- Scanner da utilizzare -->
            <div class="config-card">
              <h3>Scanner Accessibilit√†</h3>
              
              <div class="scanner-list">
                <label class="scanner-item">
                  <input type="checkbox" name="scanner" value="wave" checked>
                  <span class="scanner-name">WAVE</span>
                  <span class="scanner-desc">WebAIM scanner professionale</span>
                </label>
                
                <label class="scanner-item">
                  <input type="checkbox" name="scanner" value="pa11y" checked>
                  <span class="scanner-name">Pa11y</span>
                  <span class="scanner-desc">Test automatici WCAG</span>
                </label>
                
                <label class="scanner-item">
                  <input type="checkbox" name="scanner" value="axe_core" checked>
                  <span class="scanner-name">Axe Core</span>
                  <span class="scanner-desc">Engine Deque Labs</span>
                </label>
                
                <label class="scanner-item">
                  <input type="checkbox" name="scanner" value="lighthouse" checked>
                  <span class="scanner-name">Lighthouse</span>
                  <span class="scanner-desc">Google performance & a11y</span>
                </label>
              </div>
              
              <div class="form-group">
                <label for="scan_mode">Modalit√† Scansione</label>
                <select id="scan_mode" name="scan_mode">
                  <option value="simulate">Simulata (Test)</option>
                  <option value="real">Reale (Produzione)</option>
                </select>
              </div>
            </div>
          </div>

          <div class="phase-actions">
            <button id="start-discovery" class="btn btn-primary btn-lg">
              üîç Avvia Discovery URL
            </button>
          </div>
        </section>

        <!-- FASE 2: Discovery URL in corso -->
        <section id="phase-discovery" class="phase-section">
          <h2>üåê Discovery URL in Corso</h2>
          
          <div class="discovery-status">
            <div class="progress-card">
              <div class="progress-header">
                <span class="progress-title">Scoperta pagine del sito...</span>
                <span class="progress-percentage">0%</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill" style="width: 0%"></div>
              </div>
              <div class="progress-info">
                <span id="pages-found">0 pagine trovate</span>
                <span id="discovery-time">Tempo: 0s</span>
              </div>
            </div>

            <!-- Live discovery feed -->
            <div class="discovery-feed">
              <h3>üîÑ Pagine Scoperte in Tempo Reale</h3>
              <div id="live-urls" class="live-urls-list">
                <!-- URLs verranno aggiunti dinamicamente -->
              </div>
            </div>
          </div>
        </section>

        <!-- FASE 3: Selezione URL da scansionare -->
        <section id="phase-selection" class="phase-section">
          <h2>üìù Selezione Pagine da Analizzare</h2>
          
          <div class="selection-tools">
            <div class="selection-header">
              <div class="selection-stats">
                <span id="total-urls">0 pagine trovate</span>
                <span id="selected-urls">0 selezionate</span>
              </div>
              <div class="selection-actions">
                <button class="btn btn-sm" onclick="selectAll()">Seleziona Tutte</button>
                <button class="btn btn-sm" onclick="deselectAll()">Deseleziona Tutte</button>
                <button class="btn btn-sm btn-primary" onclick="smartSelect()">üéØ Selezione Smart</button>
              </div>
            </div>

            <!-- Filtri -->
            <div class="url-filters">
              <input type="search" id="url-search" placeholder="üîç Filtra URL...">
              <select id="page-type-filter">
                <option value="">Tutti i tipi</option>
                <option value="homepage">Homepage</option>
                <option value="contact">Contatti</option>
                <option value="form">Form</option>
                <option value="authentication">Login/Auth</option>
                <option value="ecommerce">E-commerce</option>
                <option value="content">Contenuti</option>
              </select>
            </div>
          </div>

          <!-- Lista URL con checkbox -->
          <div class="urls-container">
            <table class="urls-table">
              <thead>
                <tr>
                  <th width="40">
                    <input type="checkbox" id="select-all-cb">
                  </th>
                  <th>URL</th>
                  <th>Titolo Pagina</th>
                  <th>Tipo</th>
                  <th>Priorit√†</th>
                  <th>Elementi</th>
                </tr>
              </thead>
              <tbody id="urls-list">
                <!-- URLs verranno popolati qui -->
              </tbody>
            </table>
          </div>

          <!-- Aggiungi URL manualmente -->
          <div class="manual-urls">
            <h3>‚ûï Aggiungi URL Manualmente</h3>
            <textarea id="manual-urls-input" placeholder="Inserisci un URL per riga..." rows="3"></textarea>
            <button class="btn btn-sm" onclick="addManualUrls()">Aggiungi</button>
          </div>

          <div class="phase-actions">
            <button class="btn btn-secondary" onclick="backToConfig()">‚Üê Indietro</button>
            <button id="start-scan" class="btn btn-primary btn-lg" onclick="window.scanner?.startAccessibilityScan()">
              ‚úÖ Avvia Scansione Accessibilit√† (<span id="scan-count">0</span> pagine)
            </button>
          </div>
        </section>

        <!-- FASE 4: Scansione in corso -->
        <section id="phase-scanning" class="phase-section">
          <h2>üîé Scansione Accessibilit√† in Corso</h2>
          
          <!-- Live Monitoring Dashboard -->
          <div id="scan-monitor" class="scan-monitor-container">
            <!-- Il contenuto del monitor sar√† generato dinamicamente -->
          </div>
          
          <div class="scan-progress">
            <!-- Progress generale -->
            <div class="progress-card main-progress">
              <div class="progress-header">
                <span class="progress-title">Progresso Totale</span>
                <span class="progress-percentage">0%</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill" style="width: 0%"></div>
              </div>
              <div class="progress-info">
                <span id="current-page">Pagina 0 di 0</span>
                <span id="scan-eta">Tempo stimato: --</span>
              </div>
            </div>

            <!-- Progress per pagina -->
            <div class="pages-progress">
              <h3>üìÑ Stato Pagine</h3>
              <div id="pages-status" class="pages-status-grid">
                <!-- Stato di ogni pagina -->
              </div>
            </div>

            <!-- Log real-time -->
            <div class="scan-log">
              <h3>üìã Log Scansione</h3>
              <div id="scan-log-content" class="log-content">
                <!-- Log entries -->
              </div>
            </div>

            <!-- Live metrics -->
            <div class="live-metrics">
              <div class="metric-card">
                <div class="metric-value" id="errors-found">0</div>
                <div class="metric-label">Errori Trovati</div>
              </div>
              <div class="metric-card">
                <div class="metric-value" id="warnings-found">0</div>
                <div class="metric-label">Avvisi</div>
              </div>
              <div class="metric-card">
                <div class="metric-value" id="pages-completed">0</div>
                <div class="metric-label">Pagine Complete</div>
              </div>
              <div class="metric-card">
                <div class="metric-value" id="compliance-score">--</div>
                <div class="metric-label">Score Compliance</div>
              </div>
            </div>
          </div>
          
          <!-- Configurazione LLM dopo scansione -->
          <div id="llm-config-post-scan" class="llm-config-card" style="display: none;">
            <h3>ü§ñ Configurazione AI per Report</h3>
            <p>La scansione √® completata! Ora puoi scegliere di generare un report potenziato con l'AI.</p>
            
            <div class="form-group">
              <label for="llm_enabled_post">
                <input type="checkbox" id="llm_enabled_post" name="llm_enabled_post" class="llm-toggle">
                Genera report con analisi AI avanzata
              </label>
              <small>L'AI fornir√† raccomandazioni dettagliate, analisi approfondite e piani di remediation personalizzati</small>
            </div>
            
            <div id="llm-config-section-post" class="llm-config-section" style="display: none;">
              <div class="form-group">
                <label for="llm_model_post">Modello AI</label>
                <select id="llm_model_post" name="llm_model_post">
                  <optgroup label="GPT-5 Series (2025)">
                    <option value="gpt-5">GPT-5 (Premium) - ‚Ç¨1.25/1M token input, ‚Ç¨10/1M output</option>
                    <option value="gpt-5-mini">GPT-5 Mini - ‚Ç¨0.50/1M input, ‚Ç¨2.00/1M output</option>
                    <option value="gpt-5-nano">GPT-5 Nano (Veloce) - ‚Ç¨0.25/1M input, ‚Ç¨1.00/1M output</option>
                  </optgroup>
                  <optgroup label="O-Series Reasoning (2025)">
                    <option value="o3">O3 Reasoning (Premium) - ‚Ç¨5.00/1M input, ‚Ç¨15/1M output</option>
                    <option value="o4-mini">O4 Mini - ‚Ç¨1.00/1M input, ‚Ç¨4.00/1M output</option>
                  </optgroup>
                  <optgroup label="GPT-4.1 Extended Context">
                    <option value="gpt-4.1">GPT-4.1 (1M context) - ‚Ç¨2.00/1M input, ‚Ç¨8.00/1M output</option>
                    <option value="gpt-4.1-mini">GPT-4.1 Mini - ‚Ç¨0.30/1M input, ‚Ç¨1.20/1M output</option>
                  </optgroup>
                  <optgroup label="Legacy Models">
                    <option value="gpt-4o" selected>GPT-4o (Raccomandato) - ‚Ç¨5.00/1M input, ‚Ç¨15/1M output</option>
                    <option value="gpt-4-turbo-preview">GPT-4 Turbo - ‚Ç¨10/1M input, ‚Ç¨30/1M output</option>
                    <option value="gpt-4o-mini">GPT-4o Mini - ‚Ç¨0.15/1M input, ‚Ç¨0.60/1M output</option>
                    <option value="gpt-3.5-turbo">GPT-3.5 Turbo - ‚Ç¨0.50/1M input, ‚Ç¨1.50/1M output</option>
                  </optgroup>
                </select>
                <small id="model-info-post" class="model-info">Modello bilanciato per qualit√† e costi</small>
              </div>
              
              <div class="form-group">
                <label for="openai_api_key_post">Chiave API OpenAI *</label>
                <div class="api-key-input">
                  <input type="password" id="openai_api_key_post" name="openai_api_key_post" 
                         placeholder="sk-..." class="api-key-field">
                  <button type="button" class="btn-toggle-password" 
                          onclick="toggleApiKeyVisibilityPost()" 
                          aria-label="Mostra/nascondi chiave API">
                    üëÅÔ∏è
                  </button>
                </div>
                <div class="api-key-status" id="api-key-status-post"></div>
                <small>Inserisci la tua chiave API OpenAI. <a href="https://platform.openai.com/api-keys" target="_blank" rel="noopener">Ottieni qui</a></small>
              </div>
              
              <div class="cost-estimation">
                <h4>üí∞ Stima Costi</h4>
                <div class="cost-preview" id="cost-preview-post">
                  <div class="cost-item">
                    <span class="cost-label">Costo stimato per report:</span>
                    <span class="cost-value" id="estimated-cost-post">‚Ç¨0.50 - ‚Ç¨2.00</span>
                  </div>
                  <div class="cost-item">
                    <span class="cost-label">Basato su:</span>
                    <span class="cost-detail" id="cost-detail-post">~10K-50K token per analisi completa</span>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="phase-actions">
              <button id="generate-report-btn" class="btn btn-primary btn-lg" onclick="generateReport()">
                üìä Genera Report
              </button>
            </div>
          </div>
        </section>

        <!-- FASE 5: Report finale -->
        <section id="phase-report" class="phase-section">
          <h2>üìä Report Accessibilit√†</h2>
          
          <!-- Summary cards -->
          <div class="report-summary">
            <div class="summary-card compliance">
              <h3>Stato Conformit√†</h3>
              <div class="compliance-badge" id="compliance-status">
                <!-- Badge conformit√† -->
              </div>
              <div class="compliance-score" id="final-score">--/100</div>
            </div>

            <div class="summary-card stats">
              <h3>Riepilogo Problemi</h3>
              <div class="stats-grid">
                <div class="stat">
                  <span class="stat-value" id="total-errors">0</span>
                  <span class="stat-label">Errori Critici</span>
                </div>
                <div class="stat">
                  <span class="stat-value" id="total-warnings">0</span>
                  <span class="stat-label">Avvisi</span>
                </div>
                <div class="stat">
                  <span class="stat-value" id="total-pages">0</span>
                  <span class="stat-label">Pagine Analizzate</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Rigenerazione Report con LLM -->
          <div class="llm-regeneration-section" id="llm-regeneration-section" style="display: none;">
            <div class="regeneration-card">
              <h3>üöÄ Rigenera Report con AI</h3>
              <p>Migliora il tuo report utilizzando l'intelligenza artificiale per analisi pi√π approfondite e raccomandazioni personalizzate.</p>
              
              <div class="regeneration-options">
                <div class="form-group">
                  <label for="regeneration_model">Modello AI per rigenerazione</label>
                  <select id="regeneration_model" name="regeneration_model">
                    <optgroup label="GPT-5 Series (2025)">
                      <option value="gpt-5">GPT-5 (Premium)</option>
                      <option value="gpt-5-mini">GPT-5 Mini</option>
                      <option value="gpt-5-nano">GPT-5 Nano</option>
                    </optgroup>
                    <optgroup label="O-Series Reasoning">
                      <option value="o3">O3 Reasoning</option>
                      <option value="o4-mini">O4 Mini</option>
                    </optgroup>
                    <optgroup label="GPT-4.1 Extended">
                      <option value="gpt-4.1">GPT-4.1 (1M context)</option>
                      <option value="gpt-4.1-mini">GPT-4.1 Mini</option>
                    </optgroup>
                    <optgroup label="Legacy Models">
                      <option value="gpt-4o" selected>GPT-4o</option>
                      <option value="gpt-4-turbo-preview">GPT-4 Turbo</option>
                      <option value="gpt-4o-mini">GPT-4o Mini</option>
                      <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                    </optgroup>
                  </select>
                </div>
                
                <div class="regeneration-actions">
                  <button class="btn btn-primary btn-lg" onclick="regenerateWithLLM()" id="regenerate-btn">
                    ‚ú® Rigenera con AI
                  </button>
                  <div class="regeneration-cost" id="regeneration-cost">
                    Costo stimato: ‚Ç¨1.50 - ‚Ç¨3.00
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Report viewer -->
          <div class="report-viewer">
            <div class="viewer-toolbar">
              <button class="btn btn-primary" onclick="generatePDF()">
                üìÑ Genera PDF
              </button>
              <button class="btn" onclick="downloadHTML()">
                üíæ Scarica HTML
              </button>
              <button class="btn" onclick="sendEmail()">
                üìß Invia Email
              </button>
              <button class="btn" onclick="viewFullscreen()">
                üîç Schermo Intero
              </button>
              <button class="btn btn-secondary" onclick="toggleReportComparison()" id="compare-btn" 
                      style="display: none;" aria-label="Confronta report originale con quello migliorato dall'AI">
                üìä Confronta Report
              </button>
            </div>
            
            <div class="report-frame-container">
              <iframe id="report-frame" src=""></iframe>
            </div>
          </div>

          <!-- Azioni aggiuntive -->
          <div class="report-actions">
            <h3>üìã Documenti Aggiuntivi</h3>
            <div class="docs-grid">
              <button class="doc-btn" onclick="viewAnalytics()">
                üìä Analytics Dettagliate
              </button>
              <button class="doc-btn" onclick="viewRemediation()">
                üîß Piano Remediation
              </button>
              <button class="doc-btn" onclick="viewStatement()">
                üìù Dichiarazione Accessibilit√†
              </button>
              <button class="doc-btn" onclick="exportData()">
                üíæ Esporta Dati JSON
              </button>
            </div>
          </div>

          <div class="phase-actions">
            <button class="btn btn-lg btn-primary" onclick="startNewScan()">
              üîÑ Nuova Scansione
            </button>
          </div>
        </section>

      </div>
    </main>

    <!-- Footer -->
    <footer class="app-footer">
      <div class="container">
        <p>EAA Accessibility Scanner v2.0 | Conformit√† WCAG 2.2 AA & EAA 2025</p>
      </div>
    </footer>
  </div>

  <!-- Modals -->
  <div id="smart-selection-modal" class="modal">
    <div class="modal-content">
      <h3>üéØ Selezione Smart Pagine</h3>
      <p>Il sistema ha selezionato automaticamente le pagine pi√π rappresentative secondo la metodologia WCAG-EM:</p>
      <ul id="smart-selection-list"></ul>
      <div class="modal-actions">
        <button class="btn" onclick="closeModal()">Annulla</button>
        <button class="btn btn-primary" onclick="applySmartSelection()">Applica Selezione</button>
      </div>
    </div>
  </div>

  <!-- Modal Rigenerazione LLM -->
  <div id="llm-regeneration-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>ü§ñ Rigenerazione Report con AI</h3>
        <button class="btn-close" onclick="closeModal()" aria-label="Chiudi">&times;</button>
      </div>
      
      <div class="regeneration-progress" id="regeneration-progress" style="display: none;">
        <div class="progress-card">
          <div class="progress-header">
            <span class="progress-title">Analisi AI in corso...</span>
            <span class="progress-percentage" id="llm-progress-percent">0%</span>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" id="llm-progress-fill" style="width: 0%"></div>
          </div>
          <div class="progress-info">
            <span id="llm-current-step">Inizializzazione...</span>
          </div>
        </div>
        
        <div class="ai-thinking" id="ai-thinking">
          <div class="thinking-indicator">
            <span class="thinking-dot"></span>
            <span class="thinking-dot"></span>
            <span class="thinking-dot"></span>
          </div>
          <span>L'AI sta analizzando i risultati...</span>
        </div>
      </div>
      
      <div class="regeneration-options" id="regeneration-options">
        <div class="form-group">
          <label for="modal_regeneration_model">Modello AI</label>
          <select id="modal_regeneration_model" name="modal_regeneration_model">
            <optgroup label="GPT-5 Series (2025) - Ultima Generazione">
              <option value="gpt-5">GPT-5 - Reasoning integrato, massima qualit√†</option>
              <option value="gpt-5-mini">GPT-5 Mini - Bilanciato qualit√†/costo</option>
              <option value="gpt-5-nano">GPT-5 Nano - Economico e veloce</option>
            </optgroup>
            <optgroup label="O-Series Reasoning - Analisi Avanzata">
              <option value="o3">O3 - Premium reasoning, 20% meno errori</option>
              <option value="o4-mini">O4 Mini - Reasoning economico</option>
            </optgroup>
            <optgroup label="GPT-4.1 - Contesto Esteso">
              <option value="gpt-4.1">GPT-4.1 - Fino a 1M token di contesto</option>
              <option value="gpt-4.1-mini">GPT-4.1 Mini - 83% pi√π economico</option>
            </optgroup>
            <optgroup label="Modelli Precedenti">
              <option value="gpt-4o" selected>GPT-4o (Raccomandato) - Standard affidabile</option>
              <option value="gpt-4-turbo-preview">GPT-4 Turbo - Bilanciato</option>
              <option value="gpt-4o-mini">GPT-4o Mini - Economico</option>
              <option value="gpt-3.5-turbo">GPT-3.5 Turbo - Base veloce</option>
            </optgroup>
          </select>
        </div>
        
        <div class="regeneration-features">
          <h4>Miglioramenti inclusi:</h4>
          <ul class="feature-list">
            <li>‚ú® Analisi contestuale avanzata dei problemi</li>
            <li>üéØ Raccomandazioni specifiche per il settore</li>
            <li>üìã Piano di remediation prioritizzato</li>
            <li>üîç Identificazione pattern nascosti</li>
            <li>üìà Suggerimenti per migliorare UX</li>
          </ul>
        </div>
        
        <div class="cost-warning">
          <span class="cost-icon">üí∞</span>
          <span>Costo stimato: <strong id="modal-cost-estimate">‚Ç¨1.50 - ‚Ç¨3.00</strong></span>
        </div>
      </div>
      
      <div class="modal-actions">
        <button class="btn btn-secondary" onclick="closeModal()">Annulla</button>
        <button class="btn btn-primary" onclick="startLLMRegeneration()" id="modal-regenerate-btn">
          ‚ú® Avvia Rigenerazione
        </button>
      </div>
    </div>
  </div>

  <!-- Modal Confronto Report -->
  <div id="report-comparison-modal" class="modal modal-large">
    <div class="modal-content">
      <div class="modal-header">
        <h3>üìä Confronto Report</h3>
        <button class="btn-close" onclick="closeModal()" aria-label="Chiudi">&times;</button>
      </div>
      
      <div class="comparison-container">
        <div class="comparison-side">
          <h4>Report Originale</h4>
          <iframe id="original-report-frame" class="comparison-frame"></iframe>
        </div>
        
        <div class="comparison-divider"></div>
        
        <div class="comparison-side">
          <h4>Report Migliorato con AI</h4>
          <iframe id="enhanced-report-frame" class="comparison-frame"></iframe>
        </div>
      </div>
      
      <div class="comparison-tools">
        <button class="btn btn-sm" onclick="syncScrolling(true)" id="sync-btn">
          üîó Sincronizza Scroll
        </button>
        <button class="btn btn-sm" onclick="downloadBothReports()">
          üíæ Scarica Entrambi
        </button>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="/static/js/api_keys.js"></script>
  <script src="/static/js/scan_monitor_fixed.js"></script>
  <script src="/static/js/scanner_v2.js"></script>
</body>
</html>
